---
title: Practical React Query 2 - custom hooks and query key factory
description: Practical React Query - Part 2
date: 2023-09-28
banner: ./react-query-banner.png
tags:
  - Fundamentals
  - React Query
---

import Attribution from 'components/Attribution'
import Comments from 'components/Comments'
import Translations from 'components/Translations'
import { RqToc } from 'components/rq-toc'

<img src="./react-query-banner.png" />

<RqToc id="practical-react-query-2-custom-hooks-and-query-key-factory" />

<Translations>{[]}</Translations>

In part 2, we will learn about custom hooks and Query Key Factory. My projects' query keys follow [this pattern](https://tkdodo.eu/blog/effective-react-query-keys)

## Custom Hooks

Even if it's only for wrapping one useQuery call, creating a custom hook usually pays off because:

- You can keep the actual data fetching out of the ui, but co-located with your useQuery call.
- You can keep all usages of one query key (and potentially type definitions) in one file.
- If you need to tweak some settings or add some data transformation, you can do that in one place.

You have already seen an example of that in the todos queries above.

## Query Key factory

It is good because you can do this:

```tsx:title=setting-defaults-to-all-todo-related
// üöÄ everything todo-related will have a 1 minute staleTime
queryClient.setQueryDefaults(todoKeys.all, { staleTime: 1000 * 60 })
```

Can you recognize the difference? It could cause a mistake some day.

```json:title=non-matching-keys
['item', '1']
['item', 1]
```

---

That's it for today. If you have any questions, or just leave a comment below. ‚¨áÔ∏è

<Comments />
